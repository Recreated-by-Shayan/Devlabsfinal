const autoCorrectDictionary = {
    "adn": "and",
    "teh": "the",
    "documen": "document",
    "functon": "function",
    "alerrt": "alert",
    "cosnole": "console",
    "appednChild": "appendChild",
    "styele": "style",
    "htrml": "html",
    "elemnt": "element",
    "valu": "value",
    "lenght": "length",
    "sestInterval": "setInterval",
    "clrInterval": "clearInterval",
    "clickevent": "click event",
    "prmompt": "prompt",
    "prmpt": "prompt",
    "wrhile": "while",
    "thrwo": "throw",
    "htmllink": "html link",
    "doochead": "doctype",
    "jvavscript": "javascript",
    "prototye": "prototype",
    "finction": "function",

    "concsoel": "console",
    "documnet": "document",
    "lcik": "click",
    "fucntion": "function",
    "reutrn": "return",
    "mesasge": "message",
    "avarage": "average",
    "styels": "styles",
    "cnodition": "condition",
    "eleemnt": "element",
    "triggerr": "trigger",
    "arroow": "arrow",
    "mesasge": "message",
    "parmeters": "parameters",
    "strructure": "structure",
    "paragrph": "paragraph",


    "brdier": "border",
    "collor": "color",
    "texe": "text",
    "bkaground": "background",
    "textalgin": "text-align",
    "maring": "margin",
    "paddin": "padding",
    "displaye": "display",
    "widht": "width",
    "heigt": "height",
    "floatt": "float",
    "dissplay": "display",
    "poisiton": "position",
    "bakcground": "background",
    "borde": "border",
    "posiiton": "position",
    "margine": "margin",
    "paddign": "padding",
    "textdecroation": "text-decoration",
    "tehxt": "text",
    "folt": "float",
    "opactiy": "opacity",
    "grdient": "gradient",
    "dispaly": "display",
    "tehx": "text",
    "clor": "color",
    "trnasition": "transition",
    "fonst-size": "font-size",
    "bckground": "background",
    "mrgin": "margin",
    "mrgiin": "margin",
    "poistion": "position",
    "dispaly": "display",

    "dislay": "display",
    "bordre": "border",
    "collor": "color",
    "posittion": "position",
    "disaply": "display",
    "backgruond": "background",
    "mrgiin": "margin",
    "pdading": "padding",
    "bckgroud": "background",
    "collr": "color",
    "borer": "border",
    "bg-color": "background-color",
    "borderr": "border",
    "displaay": "display",
    "postion": "position",
    "marign": "margin",
    "tehxt": "text",
    "fonst": "font",
    "text-alig": "text-align",
    "fotn-size": "font-size",
    "borde-color": "border-color",
    "paddig": "padding",
    "margni": "margin",

    "tehx": "text",
    "trnasform": "transform",
    "grdient": "gradient",
    "fotn": "font",
    "wodth": "width",
    "deisplay": "display",
    "bordeer": "border",
    "cloor": "color",
    "disaply": "display",
    "bg-collor": "background-color",
    "flot": "float",
    "maxhight": "max-height",
    "verticl-align": "vertical-align",
    "min-widht": "min-width",
    "bgimgae": "background-image",
    "marin": "margin",
    "borderradius": "border-radius",
    "opactiy": "opacity",
    "fonstsize": "font-size",
    "posittion": "position",
    "lisst-style": "list-style",
    "border-wdith": "border-width",
    "border-styl": "border-style",
    "font-sze": "font-size",
    "line-hieght": "line-height",
    "borde-radiu": "border-radius",
    "text-decoraton": "text-decoration",

    "bdoy": "body",
    "wodth": "width",
    "borde-colr": "border-color",
    "tehxt-align": "text-align",
    "cleat": "clear",
    "heght": "height",
    "mlargin": "margin",
    "trnasition": "transition",
    "bg-colo": "background-color",
    "margin-righ": "margin-right",
    "maxh-width": "max-width",
    "min-heigt": "min-height",
    "dipslay": "display",
    "bg-iamge": "background-image",
    "btackground": "background",
    "pdading": "padding",
    "borde-radisu": "border-radius",
    "ocpacity": "opacity",
    "fonst-size": "font-size",
    "pstion": "position",
    "liststlye": "list-style",
    "borderwdith": "border-width",
    "border-stle": "border-style",
    "fot-size": "font-size",
    "lnie-height": "line-height",
    "textdecoration": "text-decoration",

    "atrr": "attr",
    "attrubute": "attribute",
    "lable": "label",
    "imge": "img",
    "lnk": "link",
    "ancher": "anchor",
    "paragrap": "paragraph",
    "headerr": "header",
    "foreeach": "foreach",
    "embeed": "embed",
    "heigt": "height",
    "texare": "textarea",
    "buttn": "button",
    "ifrme": "iframe",
    "unordeed": "unordered",


    "heighht": "height",
    "weidth": "width",
    "boxshado": "box-shadow",
    "bordre-radius": "border-radius",
    "maring-left": "margin-left",
    "pading": "padding",
    "flaot": "float",
    "teext-align": "text-align",
    "displayy": "display",
    "postion": "position",
    "backgroud-color": "background-color",
    "fonst-style": "font-style",
    "brder": "border",
    "cursr": "cursor",


    "alret": "alert",
    "consol": "console",
    "fech": "fetch",
    "methd": "method",
    "functon": "function",
    "retun": "return",
    "addeventlistener": "addEventListener",
    "ifelse": "if-else",
    "lengthh": "length",
    "valuue": "value",
    "parsint": "parseInt",
    "indexof": "indexOf",
    "delet": "delete",
    "strng": "string",
    "elsee": "else",
    "instancof": "instanceof",

    "lebel": "label",

    "<1h>": "<h1></h1>",
    "<2h>": "<h2></h2>",

    "<3h>": "<h3></h3>",
    "<4h>": "<h4></h4>",

    "<5h>": "<h5></h5>",

    "<6h>": "<h6></h6>",


    "1h": "<h1></h1>",
    "2h": "<h2></h2>",

    "3h": "<h3></h3>",
    "4h": "<h4></h4>",

    "5h": "<h5></h5>",

    "6h": "<h6></h6>",

    "html": "<html></html>",
    "head": "<head></head>",
    "body": "<body></body>",
    "title": "<title></title>",
    "header": "<header></header>",
    "form": "<form action=''></form>",
    "label": "<label for='' id='' name=''></label>",
    "input": "<input type='' id=''>",
    "button": "<button type='submit' id=''></button>",
    "pt": "<p></p>",
    "h1": "<h1></h1>",
    "h2": "<h2></h2>",
    "h3": "<h3></h3>",
    "h4": "<h4></h4>",
    "h5": "<h5></h5>",
    "h6": "<h6></h6>",
    "ult": "<ul></ul>",
    "olt": "<ol></ol>",
    "li": "<li></li>",
    "at": "<a href=''></a>",
    "img": "<img src='' alt='' />",
    "div": "<div></div>",
    "span": "<span></span>",
    "section": "<section></section>",
    "article": "<article></article>",
    "nav": "<nav></nav>",
    "aside": "<aside></aside>",
    "main": "<main></main>",
    "footer": "<footer></footer>",
    "blockquote": "<blockquote></blockquote>",
    "pret": "<pre></pre>",
    "code": "<code></code>",
    "table": "<table></table>",
    "tr": "<tr></tr>",
    "th": "<th></th>",
    "td": "<td></td>",
    "caption": "<caption></caption>",
    "strong": "<strong></strong>",
    "em": "<em></em>",
    "abbr": "<abbr></abbr>",
    "hr": "<hr>",
    "br": "<br>",
    "iframe": "<iframe src='' frameborder='0'></iframe>",
    "textarea": "<textarea id='' name=''></textarea>",
    "select": "<select id='' name=''></select>",
    "option": "<option value=''></option>",

    "fontfamily": "font-family: Arial, sans-serif;",
    "fontsize": "font-size: 16px;",
    "fontweight": "font-weight: bold;",
    "fontstyle": "font-style: italic;",
    "cl": "color:#fff;",
    "bgcolor": "background-color: #fff;",
    "textalign": "text-align: left;",
    "disp": "display: block;",
    "wide": "width: 100px;",
    "tall": "height: 100px;",
    "mar": "margin: 0;",
    "ipad": "padding: 0;",
    "bor": "border: 1px solid #000;",
    "borderradius": "border-radius: 5px;",
    "pos": "position: relative;",
    "up": "top: 0;",
    "righ": "right: 0;",
    "bott": "bottom: 0;",
    "lef": "left: 0;",
    "opaci": "opacity: 1;",
    "transi": "transition: all 5s linear infinite;",
    "shadow": "box-shadow: 4px 4px 2px 2px black;",

    "float": "float: left;",
    "clear": "clear: both;",
    "textdecoration": "text-decoration: none;",
    "lineheight": "line-height: 1.5;",
    "texttransform": "text-transform: uppercase;",
    "wordspacing": "word-spacing: 2px;",
    "letterspacing": "letter-spacing: 1px;",
    "zindex": "z-index: 1;",
    "overfl": "overflow: hidden;",
    "curso": "cursor: pointer;",
    "textshadow": "text-shadow: h-offset v-offset blur color;",
    "backgroundimage": "background-image: url('image.jpg');",
    "backgroundsize": "background-size: cover;",
    "backgroundposition": "background-position: center;",
    "backgroundrepeat": "background-repeat: no-repeat;",
    "transf": "transform: scale(1.2) rotate(45deg);",
    "opaci": "opacity: 0.5;",
    "outl": "outline: 2px solid #333;",

    "boxsizing": "box-sizing: border-box;",
    "visibi": "visibility: hidden;",
    "userselect": "user-select: none;",
    "boxsizing": "box-sizing: border-box;",
    "doucment": "document",
    "getElementById": "document.getElementById('id');",
    "querySelector": "document.querySelector('.class');",
    "addEventListener": "element.addEventListener('event', function);",
    "removeEventListener": "element.removeEventListener('event', function);",
    "setInterval": "setInterval(function, interval);",
    "clearInterval": "clearInterval(intervalId);",
    "setTimeout": "setTimeout(function, delay);",
    "clearTimeout": "clearTimeout(timeoutId);",
    "try": "try { } catch (error) { }",
    "throw": "throw new Error('message');",
    "fetch": "fetch(url).then(response => response.json()).then(data => { });",
    "JSONparse": "JSON.parse(jsonString);",
    "JSONstringify": "JSON.stringify(jsonObject);",
    "Array": "Array",
    "Object": "Object",
    "String": "String",
    "Number": "Number",
    "Boolean": "Boolean",
    "Math": "Math",
    "Date": "Date",
    "RegExp": "RegExp",
    "prototype": "prototype",
    "bind": "function.bind(context);",
    "call": "function.call(context, arg1, arg2);",
    "apply": "function.apply(context, [args]);",
    "length": "array.length",
    "push": "array.push(item);",
    "pop": "array.pop();",
    "shift": "array.shift();",
    "unshift": "array.unshift(item);",
    "slice": "array.slice(start, end);",
    "splice": "array.splice(start, deleteCount, item1, item2);",
    "forEach": "array.forEach(function(item, index) { });",
    "map": "array.map(function(item, index) { return transformedItem; });",
    "filter": "array.filter(function(item, index) { return condition; });",
    "reduce": "array.reduce(function(accumulator, item, index) { return updatedAccumulator; }, initialValue);",
    "sort": "array.sort(function(a, b) { return comparison; });",
    "join": "array.join(separator);",
    "indexOf": "array.indexOf(item);",
    "includes": "array.includes(item);",
    "find": "array.find(function(item, index) { return condition; });",
    "findIndex": "array.findIndex(function(item, index) { return condition; });",
    "every": "array.every(function(item, index) { return condition; });",
    "some": "array.some(function(item, index) { return condition; });",
    "concat": "array.concat(anotherArray);",
    "reverse": "array.reverse();",
    "fill": "array.fill(value, start, end);",
    "from": "Array.from(arrayLikeObject);",
    "Date.now": "Date.now();",
    "toLocaleString": "date.toLocaleString();",
    "getTime": "date.getTime();",
    "getDay": "date.getDay();",
    "getMonth": "date.getMonth();",
    "getFullYear": "date.getFullYear();",
    "getHours": "date.getHours();",
    "getMinutes": "date.getMinutes();",
    "getSeconds": "date.getSeconds();",
    "getMilliseconds": "date.getMilliseconds();",
    "setTime": "date.setTime(milliseconds);",
    "RegExp.test": "/pattern/.test(string);",
    "RegExp.exec": "/pattern/.exec(string);",
    "RegExp.match": "string.match(/pattern/);",
    "RegExp.replace": "string.replace(/pattern/, replacement);",
    "RegExp.search": "string.search(/pattern/);",
    "RegExp.split": "string.split(/pattern/);"

};

function applyAutoCorrect(inputElement) {
    const inputText = inputElement.value;
    const lines = inputText.split("\n");

    const correctedLines = lines.map(line => {
        const words = line.split(/\s/);
        const correctedWords = words.map(word => {
            const correctedWord = autoCorrectDictionary[word.toLowerCase()];
            return correctedWord ? correctedWord : word;
        });
        return correctedWords.join(" ");
    });

    inputElement.value = correctedLines.join("\n");
}


function loadCodeFromLocalStorage() {
    htmlCodeInput.value = localStorage.getItem("htmlCode") || "";
    cssCodeInput.value = localStorage.getItem("cssCode") || "";
    jsCodeInput.value = localStorage.getItem("jsCode") || "";
}

function saveCodeToLocalStorage() {
    localStorage.setItem("htmlCode", htmlCodeInput.value);
    localStorage.setItem("cssCode", cssCodeInput.value);
    localStorage.setItem("jsCode", jsCodeInput.value);
}


function handleEnterKey(event) {
    if (event.key === "Enter") {
        event.preventDefault();
        const textarea = event.target;
        const start = textarea.selectionStart;
        const end = textarea.selectionEnd;
        const value = textarea.value;

        const beforeCursor = value.substring(0, start);
        const afterCursor = value.substring(end);
        const newValue = beforeCursor + "\n" + afterCursor;

        textarea.value = newValue;
        textarea.selectionStart = textarea.selectionEnd = start + 1;
    }
}




const htmlCodeInput = document.getElementById("html-code");
const cssCodeInput = document.getElementById("css-code");
const jsCodeInput = document.getElementById("javascript-code");
const outputFrame = document.getElementById("output");

loadCodeFromLocalStorage();
applyAutoCorrect(htmlCodeInput);
applyAutoCorrect(cssCodeInput);
applyAutoCorrect(jsCodeInput);

htmlCodeInput.addEventListener("input", function () {
    applyAutoCorrect(htmlCodeInput);
    saveCodeToLocalStorage();
});

cssCodeInput.addEventListener("input", function () {
    applyAutoCorrect(cssCodeInput);
    saveCodeToLocalStorage();
});

jsCodeInput.addEventListener("input", function () {
    applyAutoCorrect(jsCodeInput);
    saveCodeToLocalStorage();
});

htmlCodeInput.addEventListener("keydown", handleEnterKey);
cssCodeInput.addEventListener("keydown", handleEnterKey);
jsCodeInput.addEventListener("keydown", handleEnterKey);

function run() {
    const htmlCode = htmlCodeInput.value;
    const cssCode = cssCodeInput.value;
    const jsCode = jsCodeInput.value;
    htmlCodeInput.style.whiteSpace = "pre-wrap";
    htmlCodeInput.style.width = "100%";
    htmlCodeInput.style.height = "300px";

    cssCodeInput.style.whiteSpace = "pre-wrap";
    cssCodeInput.style.width = "100%";
    cssCodeInput.style.height = "300px";

    jsCodeInput.style.whiteSpace = "pre-wrap";
    jsCodeInput.style.width = "100%";
    jsCodeInput.style.height = "300px";


    outputFrame.contentDocument.body.innerHTML = htmlCode + "<style>" + cssCode + "</style>";
    outputFrame.contentWindow.eval(jsCode);
}

document.getElementById("run-button").addEventListener("click", run);

document.getElementById("refresh-button").addEventListener("click", function () {
    htmlCodeInput.value = "";
    cssCodeInput.value = "";
    jsCodeInput.value = "";
    outputFrame.contentDocument.body.innerHTML = "";
});

document.getElementById("save-button").addEventListener("click", function () {
    const htmlContent = htmlCodeInput.value;
    const cssContent = cssCodeInput.value;
    const jsContent = jsCodeInput.value;

    const htmlBlob = new Blob([htmlContent], { type: "text/html" });
    const htmlUrl = URL.createObjectURL(htmlBlob);
    const htmlLink = document.createElement("a");
    htmlLink.href = htmlUrl;
    htmlLink.download = "index.html";
    htmlLink.click();

    const cssBlob = new Blob([cssContent], { type: "text/css" });
    const cssUrl = URL.createObjectURL(cssBlob);
    const cssLink = document.createElement("a");
    cssLink.href = cssUrl;
    cssLink.download = "styles.css";
    cssLink.click();

    const jsBlob = new Blob([jsContent], { type: "application/javascript" });
    const jsUrl = URL.createObjectURL(jsBlob);
    const jsLink = document.createElement("a");
    jsLink.href = jsUrl;
    jsLink.download = "script.js";
    jsLink.click();
});

document.getElementById("run-button").addEventListener("click", function () {
    const outputSection = document.querySelector(".right");
    const iframe = document.getElementById("output");
    outputSection.scrollIntoView({ behavior: "smooth" });

    iframe.onload = function () {
        outputSection.scrollIntoView({ behavior: "smooth" });
    };
});





